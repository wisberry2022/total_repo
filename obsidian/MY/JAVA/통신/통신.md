
JAVA에서는 웹서버 통신을 위해 java.net 이라는 패키지를 제공한다. 이를 통해 서버의 주소를 String으로 넣어 정보를 받을 수도 있으며, IP 주소를 byte 배열로 바꾼 뒤 통신을 시도할 수도 있다. 그 전에 통신에 대한 개념에 대해 알아보고자 한다.

인터넷 상의 수많은 웹사이트들은 사람이 알아볼 수 있는 도메인명(naver.com)과 컴퓨터가 식별 할 수 있는 IP 주소를 가지고 있다. IP 주소(IPv4)의 경우 1Byte 4개가 배열 형태로 이루어져 있다고 볼 수 있다.

```java

import java.net.*;

// ... code

byte[] bArr = {(byte)192,(byte)168,(byte)240,111};
InetAddress add = InetAddress.getByAddress(bArr);
System.out.println(addr1.getHostName()); // add의 HostName 반환
System.out.println(addr1.getHostAddress()); // add의 iP 주소 반환

```

JAVA에서는 위와같이 IP, 호스트 네임을 이용하여 일부 정보들을 확인 할 수 있다.


## 1. DNS와 주소 체계

인터넷 상의 웹사이트들은 다른 유저들의 접속을 위해 고유한 이름을 가진다. 사람은 도메인 주소(naver.com / google.co.kr)를 가지고 웹사이트에 접속하나, 웹에서는 고유한 IP주소를 통해 접속하게 된다. 웹이 아니라도 이종의 컴퓨터에 접속하기 위해서는 1Byte 4개로 이루어진 IP주소(0  ~ 255의 부호가 없는 정수)가 필요하다.

원칙적으로는 웹 사이트의 고유한 IP로 접속해야하나, 네 자리 수의 IP를 모두 알 수 없으니, 사람은 도메인을 이용하여 접속하게 된다. 사람이 입력한 도메인 주소는 DNS(Domain Name System) 서버에 전송되고, 그 도메인에 해당하는 IP 주소를 알려준다. 그리고 전달받은 IP 주소를 통해 해당 IP 주소에 해당하는 웹 사이트를 연결시켜주는 것이다.

DNS와 도메인은 유저들로 하여금 인터넷의 사용을 더욱 편리하게 만들었다. 웹사이트의 많은 아이피 주소를 외우는 것은 부담스러운 일이다. 아이피 주소에 맞는 String 형태의 이름을 부여하고, 그것을 DNS 서비스에 등록하여 유저들이 도메인 이름을 입력하였을 때 해당 도메인에 해당하는 아이피 주소를 DNS가 찾아 유저에게 전달한다.

국내에서 DNS 서버는 통신사들이 담당한다. 그렇기 때문에, LG/SKT/KT가 가지고 있는 DNS 서버는 각각 다르기에 DNS 서버 주소도 다르다.

|통신사|DNS 서버 주소|
|---|---|
| LG | 168.126.63.1 |
| SKT | 210.220.163.82 |
| KT | 168.126.63.1 |


### 1-1. Hosts File

Window는 Host 파일을 제공한다. Host 파일은, 사용자가 도메인명으로 웹을 접속할 때 DNS 서버를 거치지 않고 개인 컴퓨터가 이미 알고 있는 주소를 통해 접속하게 된다. 즉, Hosts File을 이용하여 유저가 임의의 주소를 등록할 수 있으며, 이후 브라우저에서 해당 주소를 입력했을 때, DNS를 거치지 않게된다.

옛날에는 이를 이용하여 Host 위변조 공격으로 피싱 사이트로 연결하는 경우가 있었으나 최근엔 많이 줄어든 추세다.


## 2. IPv4

IPv4는 1Byte 4개로 이루어져 있어 활용할 수 있는 주소공간은 255의 네 제곱이지만, 2000년 들어 신규주소할당은 중지되었다. 이를 극복하기 위해 더 많은 주소공간을 가진 주소 체계를 개발했으나 크게 실용성이 있지는 않다.

이러한 문제를 극복하기 위해 공인 IP와 사설 IP 개념을 도입하여, 사설 IP가 공인 IP에 포함되는 형식을 통해 주소할당고갈문제를 어느정도 극복했다.

거대한 네트워크는 각 노드들의 연결로 이루어져 있다. 연결된 노드들은 모두 공인 IP이며, 공인 IP 내부에서 여러 개의 사설 IP들이 존재한다. 

사설 IP 생성을 위해 IPv4 내에서 할당된 특수 용도 주소를 사용한다. 10.0.0.0/8과 172.16.0.0/12, 192.168.0.0/16 로 나누어져 있다. 사설 IP는 중복이 가능하다는 특징이 있다.

또한 사설 IP는 내부에서 외부로 나갈 수 있으나, 외부에서는 사설 IP 대역에 대한 응답을 해주지 않는다. 왜냐하면 사설 IP는 내부적으로 사용되는 특수한 대역이기 때문에, 다른 라우터에서 할당한 어떤 사설 IP와 동일할 수도 있기 때문에 사설 IP가 자신의 그룹을 벗어날 수는 있어도, 사설 IP가 보낸 어떤 요청을 라우터가 받아도 사설 IP에 대한 요청이라면 응답해주지 못하는 것이다. 


## 3. 라우터

라우터는 컴퓨터 네트워크 간에 데이터 패킷을 전송하는 네트워크 장치다.  웹사이트 이용을 위해 도메인을 입력하면, DNS에서 도메인을 아이피 주소로 바꾸고, 해당 요청은 사용자가 이용하고 있는 컴퓨터의 상위 라우터에 도달하게 된다.

라우터가 목표 네트워크를 찾아가는 방식은, 다른 라우터에게 요청하는 것이다. 다중으로 연결된 라우터 중 통신이 가장 원활한 라우터에게 요청을 전송한다. 그리고 이 행위를 목표 지점에 도착할 때까지 계속 반복한다.

라우터의 주소는 게이트 웨이이며, 게이트 웨이를 통해 외부 네트워크와 통신할 수 있다. 


## 4. DHCP / 고정 IP / 유동 IP

DHCP 서버는 개인 PC에서 사용할 수 있는 IP/DNS 서버를 자동으로 할당해주는 서버를 의미한다. 공유기를 사용하는 일반 가정집에서는, DHCP의 역할을 공유기가 담당한다. 이렇게 동적으로 할당되는 IP를 유동IP라고 하며, DHCP 서버 이용 없이 사용자가 게이트 웨이, DNS, IP를 모두 설정해주어야 한다면 그것은 고정 IP이다.

고정 IP를 활용하는 곳은 학교/관공서다. 이런 곳들은 자신들의 주소가 계속 변경되는 것이 불리하기 때문에 고액을 지불하고 고정 IP를 사용한다.

유동 IP를 사용하는 것은 IPv4 주소공간 문제 때문에 개인 PC에서 사용된다. 따라서 항상 고정된 IP 주소를 할당받는 것은 주소공간 낭비가 될 수 있다. 그에 따라 ISP에서는 한정된 IP주소만을 가지고, A 사용자가 접속 할 때는 A주소를 주고, 접속을 끊었을 때 A주소를 회수하고 새로 접속한 B 사용자에게 A 주소를 준다. 이와같은 방식이 유동 IP다.


## 5. www

www는 World Wide Web의 줄임말로써, 전세계적인 정보 공간을 의미한다. `www.naver.com`과 `naver.com`은 

