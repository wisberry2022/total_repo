

# 0. What is Branch Strategy?
***

여러 개발자가 하나의 저장소를 사용하는 환경에서 저장소를 효과적으로 활용하기 위한 Work-Flow다. 브랜치의 생성, 삭제, 병합 등 git의 유연한 군조를 활용해서, 각 개발자들의 혼란을 최대한 줄이며 다양한 방식으로 소스를 관리하는 역할을 한다. 즉, 브랜치 생성에 규칙을 만들어서 협업을 유연하게 하는 방법론을 의미한다.


# 1. Git Flow
***

Git에서 소스 코드와 버전을 효율적으로 관리하기 위한 브랜칭 관리 전략이다. Git Flow를 사용하게 되면 아래와 같은 Branch를 사용해야한다.

- master: 제품으로 출시될 수 있는 브랜치
- develop: 다음 출시 버전을 개발하는 브랜치
- feature: 기능을 개발하는 브랜치
- release: 이번 출시 버전을 준비하는 브랜치
- hotfix: 출시 버전에서 발생한 버그를 수정하는 브랜치

Git Flow 전략에서는 메인 브랜치와 보조 브랜치를 구분한다. master/develop 브랜치를 메인으로, 그 외 나머지 브랜치를 보조 브랜치라 칭한다.


## Main Branch

master 브랜치와 develop 브랜치 두 종류를 의미하며, master 브랜치는 배포 가능한 상태만을 관리하는 브랜치이며, develop 브랜치는 다음에 배포할 것을 개발하는 브랜치다.

즉, develop 브랜치는 통합 브랜치의 역할을 하며, 평소에는 이 브랜치를 기반으로 개발을 진행한다.


## Sub Branch

보조 브랜치는 feature branch 도는 topic branch를 의미한다. 브랜치가 뻗어나오는 곳은 develop이며, 뻗어나갔던 가지가 다시 합쳐지는 곳 또한 develop이다. 보조 브랜치에서 개발하고, 개발이 완료되면 다시 develop 브랜치로 merge한다.

보조 브랜치의 이름은, master, develop, release-?, hotfix-?를 제외하기만 하면 자유롭게 이름 설정이 가능하다.

보조 브랜치는 새로운 기능을 추가할 때 주로 사용하는 가지다.

develop 브랜치에서는 기존에 잘 작동하는 개발코드가 담겨있으며, 보조 브랜치는 새로 변경될 개발코드를 분리하고, 각각 보존하는 역할을 한다. 즉, 보조 브랜치는 기능을 다 완성할 때까지 유지하고, 다 완성되면 develop 브랜치로 merge하고, 결과가 좋지 못하면 버리는 방향을 취한다.

보조 브랜치는 보통 개발자 저장소에만 있는 브랜치고, origin에는 push 하지 않는다.


## Release Branch

릴리즈 브랜치는 배포를 위한 최종적인 버그 수정 등의 개발을 수행하는 브랜치를 말한다. 가지가 뻗어나오는 곳은 develop이며, 뻗어나갔던 가지가 다시 합쳐지는 곳은 develop, master이다. 릴리즈 브랜치의 이름은 release-* 로 사용하며, 새로운 제품을 배포하고자 할 때 사용하는 가지이다.

develop 브랜치에 버전에 포함되는 기능이 merge 되었다면 QA를 위해 develop 브랜치에서부터 release 브랜치를 생성한다. 배포 가능한 상태가 되면 master 브랜치로 병합시키고, 출시된 master 브랜치에 버전 태그(ex, v1.0, v0.2)를 추가한다.

release 브랜치에서 기능을 점검하며 발견한 버그 수정 사항은 develop 브랜치에도 적용해줘야한다. 그러므로 배포 완료 후 develop 브랜치에 대해서도 merge 작업을 수행해야 한다.


## Hotfix Branch

핫픽스 브랜치는 배포한 버전에서 긴급하게 수정할 필요가 있을 때, master 브랜치에서 분리하는 브랜치를 의미한다.

가지가 뻗어나오는 곳은 master이며, 뻗어나갔던 가지가 다시 합쳐지는 곳은 develop, master이다. 이름 설정은 hotfix-?로 사용된다.

제품에서 버그가 발생했을 경우에는 처리를 위해 이 가지로 해당 정보들을 모아준다. 버그에 대한 수정이 완료된 후에는 develop, master에 곧장 반영해주며 tag를 통해 관련 정보를 기록해둔다.

버그를 잡는 사람이 일하는 동안에도 다른 사람들은 develop 브랜치에서 하던 일을 계속할 수 있다. 이 때 만든 hotfix 브랜치에서의 변경 사항은 develop 브랜치에도 merge하여 문제가 되는 부분을 처리해줘야 한다.

release 가지가 생성되어 관리되고 있는 상태라면 해당 가지에 hotfix 정보를 병합시켜 다음번 배포 시 반영이 정상적으로 이루어질 수 있도록 한다.

hotfix는 보통 급히 버그를 해결하기 위해 생성되는 가지기 때문에 버그를 해결하면 보통 제거하는 일회성 브랜치다.



## 1-1. Git Flow with Scrum
***

Scrum에서 스프린트 단위로 feature 브랜치를 생성하고, 브랜치 내 기능 개발이 모두 완료되면 master 브랜치에 병합하는 방식이 많이 사용된다. 